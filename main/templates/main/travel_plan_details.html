{% extends "main/header.html" %}
{% block content %}
<style>
    .item1 {
        display: flex;
        justify-content: center;
        align-items: flex-start;
        flex-direction: column-reverse;
        flex-wrap: nowrap;
        align-content: stretch;
    }
    .accept-button {
        background-color: green;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        margin-right: 10px;
    }
    .decline-button {
        background-color: red;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
    li {
        list-style: none;
    }
</style>
<div class="report-container">
    <div class="report-body">
        <div class="report-topic-heading">
            <h2>Travel Plan Details</h2>
        </div>

        <div class="items">
            <div class="item1">
                <h3>Members who accepted:</h3>
                <br>
                <br>
                <h3>Organizer:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{ travel_plan.organizer }}</h3>
                <h3>Source Place:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{ travel_plan.source_place }}</h3>
                <h3>Destination Place:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{ travel_plan.destination_place }}</h3>
                <h3>Date:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{ travel_plan.date }}</h3>
                <h3>Leaving Time:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{ travel_plan.leaving_time }}</h3>
                <h3>Waiting Time:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{ travel_plan.waiting_time }}</h3>
            </div>
            <div class="item1">
                <ul>
                    {% for member in travel_plan.members.all %}
                        <b><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ member.username }}</li></b>
                    {% endfor %}
                </ul>
            </div>
            <br>
            <br>
            {% if request.user != travel_plan.organizer %}
            <div class="button-container">
                {% if not is_past_trip %}
                <form action="{% url 'accept_trip' travel_plan.id %}" method="post">
                    {% csrf_token %}
                    {% if request.user in travel_plan.members.all %}
                        <button type="submit" name="cancel" class="decline-button">Cancel</button>
                    {% else %}
                        <button type="submit" name="accept" class="accept-button">Accept</button>
                    {% endif %}
                </form>
                {% endif %}
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock content %}
